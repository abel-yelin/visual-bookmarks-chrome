!function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};t.default={transitionEnd:function(){var e={transition:"transitionend",webkitTransition:"webkitTransitionEnd"},t=document.createElement("fake");for(var o in e)if(void 0!==t.style[o])return e[o];return!1},debounce:function(e,t,o){var n=null;return function(){var a=this,r=arguments,i=function(){n=null,o||e.apply(a,r)},l=o&&!n;clearTimeout(n),n=setTimeout(i,t),l&&e.apply(a,r)}},trigger:function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=new Event(e,n({bubbles:!1,cancelable:!1},o));t.dispatchEvent(a)},templater:function(e,t){return e.replace(/\%(.*?)\%/g,function(e,o){return t[o]||""})},notifications:function(e,t){t=t||e,chrome.notifications.create(t,{type:"basic",iconUrl:"icons/icon128.png",title:"Visual bookmarks",message:e},function(){})},imageLoaded:function(e,t){var o=new Image;o.onload=function(){t.done&&t.done(e)},o.onerror=function(){t.fail&&t.fail(e)},o.src=e},base64ToBlob:function(e,t,o){for(var n=e,a=t||"",r=atob(n.split(",")[1]),i=new ArrayBuffer(r.length),l=new Uint8Array(i),s=0;s<r.length;s++)l[s]=r.charCodeAt(s);var c=new Blob([i],{type:a});return o?o(c):c},resizeScreen:function(e,t){var o=new Image;o.onload=function(){300<o.height&&(o.width*=300/o.height,o.height=300);var e=document.createElement("canvas"),n=e.getContext("2d");e.width=o.width,e.height=o.height,n.drawImage(o,0,0,o.width,o.height),t(e.toDataURL("image/jpg"))},o.src=e},rand:function(e,t){return Math.round(e-.5+Math.random()*(t-e+1))},getDomain:function(e){return e.replace(/(https?|ftps?|chrome|chrome-extension|file):\/\/\/?(www.)?/i,"").replace(/:?\/.*/i,"")}}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){var t="";switch(e.name){case"QuotaExceededError":t="QuotaExceededError";break;case"NotFoundError":t="NotFoundError";break;case"SecurityError":t="SecurityError";break;case"InvalidModificationError":t="InvalidModificationError";break;case"InvalidStateError":t="InvalidStateError";break;default:t="Unknown Error"}console.error(t)}var t=null;return{init:function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,n=arguments[1];navigator.webkitPersistentStorage.requestQuota(1048576*o,function(o){window.webkitRequestFileSystem(window.PERSISTENT,o,function(e){t=e,n&&n()},e)},e)},usedAndRemaining:function(e){navigator.webkitPersistentStorage.queryUsageAndQuota(function(t,o){e&&e(t,o)})},createDir:function(o,n){t.root.getDirectory(o,{create:!0},function(e){n&&n(e)},e)},getDir:function(o,n){t.root.getDirectory(o,{},function(e){n&&n(e)},e)},deleteDir:function(o,n,a){n=n||{},void 0===n.recursive&&(n.recursive=!1),t.root.getDirectory(o,{},function(t){n.recursive?t.removeRecursively(function(){a&&a()},e):t.remove(function(){a&&a()},e)},e)},createFile:function(e,o,n){t.root.getFile(e,{create:!0},function(e){e.createWriter(function(t){t.onwriteend=function(){n&&n(e)},t.onerror=function(e){console.log(e)};var a=new Blob([o.file],{type:o.fileType});t.write(a)})})},deleteFile:function(o,n){t.root.getFile(o,{create:!1},function(t){t.remove(function(){n&&n()},e)},e)},purge:function(){t.root.createReader().readEntries(function(t){for(var o,n=0;o=t[n];++n)o.isDirectory?o.removeRecursively(function(){},e):o.remove(function(){},e);console.info("Local storage emptied.")},e)}}}();t.default=n},function(e,t){},function(e,t,o){!function(t,o){e.exports=function(){return function(e){function t(n){if(o[n])return o[n].exports;var a=o[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},a=o(1);!function(e){e&&e.__esModule}(a),o(2);var r=function(){function e(e){var t=n(document.createElement("span"),{className:"ripple"});return e.appendChild(t),t}function t(t,o){if(1!==o.which)return!0;var n=o.target.closest(t);if(n){var a=getComputedStyle(n).position;n.classList.add("ripple-container"),"fixed"!==a&&"absolute"!==a&&(n.style.position="relative");var r=n.getAttribute("data-ripple-color")||"rgba(0,0,0, .3)",i=n.hasAttribute("data-ripple-center"),s=n.getBoundingClientRect(),c=s.width,d=s.height,u=s.left,f=s.top,m=o.clientX-u,h=o.clientY-f,g=Math.max(c,d),v=l=e(n),p=g/2;v.style.left=i?"50%":m-p+"px",v.style.top=i?"50%":h-p+"px",v.style.width=g+"px",v.style.height=g+"px",i&&(v.style.marginTop=-p+"px",v.style.marginLeft=-p+"px"),v.style.backgroundColor=r,setTimeout(function(){v.style.cssText+="transform: scale(2.5); opacity: 0.5"},10)}}function o(e,t){if("mouseout"===t.type&&!t.target.closest(e))return!0;if("mouseup"===t.type&&1!==t.which)return!0;if(!l)return!0;var o=getComputedStyle(l)["transition-duration"],n=1e3*parseFloat(o),a=l;l=null;var r=a.parentNode,i=r.getElementsByClassName("ripple");a.style.opacity=0,setTimeout(function(){r.removeChild(a),i.length<1&&(r.style.position="")},n)}var a={},r=void 0,i=void 0,l=void 0,s=!1;return a.init=function(e){if(!s){if("string"!=typeof e)throw new Error("Selector must be a string");r=t.bind(null,e),i=o.bind(null,e),document.body.addEventListener("mousedown",r),document.body.addEventListener("mouseout",i),document.body.addEventListener("mouseup",i),document.body.addEventListener("dragstart",i),s=!0}},a.destroy=function(){s&&(document.body.removeEventListener("mousedown",r),document.body.removeEventListener("mouseout",i),document.body.removeEventListener("mouseup",i),document.body.removeEventListener("dragstart",i),r=null,i=null,l=null,s=!1)},a}();t.default=r,e.exports=t.default},function(e,t){},function(e,t,o){"use strict";!function(e){"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,o=(t.document||t.ownerDocument).querySelectorAll(e),n=0;o[n]&&o[n]!==t;)++n;return Boolean(o[n])}),"function"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype)}])}()}()},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Element.prototype.matches=Element.prototype.matches||function(e){for(var t=this,o=(t.document||t.ownerDocument).querySelectorAll(e),n=0;o[n]&&o[n]!==t;)++n;return!!o[n]},Element.prototype.closest=Element.prototype.closest||function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){Object.keys(a).forEach(function(e){null===localStorage.getItem(e)&&localStorage.setItem(e,a[e])}),["http://free.pagepeeker.com/v2/thumbs.php?size=x&url=[URL]","http://api.webthumbnail.org/?width=500&height=400&screen=1280&url=[URL]"].indexOf(localStorage.getItem("thumbnailing_service"))>-1&&localStorage.setItem("thumbnailing_service",a.thumbnailing_service),"true"===localStorage.getItem("enable_sync")&&chrome.storage.onChanged.addListener(function(){n.restoreFromSync(),window.location.reload()})}function t(e){chrome.storage.sync.get(function(t){Object.keys(t).forEach(function(e){"default_folder_id"!==e&&localStorage.setItem(e,t[e])}),e&&e()})}function o(){var e={};Object.keys(a).forEach(function(t){localStorage[t]&&"default_folder_id"!==t&&(e[t]=localStorage[t])}),chrome.storage.sync.set(e)}var a={background_color:"#f7f7f7",background_image:"background_color",background_external:"",default_folder_id:1,dial_columns:5,vertical_center:"false",drag_and_drop:"true",auto_generate_thumbnail:"true",enable_sync:"false",show_toolbar:"true",show_settings_icon:"true",show_create_column:"true",show_favicon:"true",thumbnailing_service:"https://logo.clearbit.com/[URL]"};return{init:e,restoreFromSync:t,syncToStorage:o}}();t.default=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll("[data-locale-message]");Array.prototype.slice.call(e).forEach(function(e){var t=e.getAttribute("data-locale-message");if(~t.indexOf("placeholder"))return void(e.placeholder=chrome.i18n.getMessage(t));e.textContent=chrome.i18n.getMessage(t)})}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e){"online"===e.type?(location.reload(),s.default.notifications(chrome.i18n.getMessage("notice_online"),"idConnection")):s.default.notifications(chrome.i18n.getMessage("notice_offline"),"idConnection")}o(2);var r=o(3),i=n(r);o(4);var l=o(0),s=n(l),c=o(5),d=n(c),u=o(8),f=n(u),m=o(6),h=n(m),g=o(11),v=n(g),p=o(12),b=n(p),_=function(){function e(){_=new b.default(d),u.addEventListener("change",n),u.addEventListener("click",a),document.getElementById("formBookmark").addEventListener("submit",r),document.getElementById("resetCustomImage").addEventListener("click",i),d.addEventListener("modal.show",l),d.addEventListener("modal.hide",c),document.getElementById("closeModal").addEventListener("click",function(){_.hide()}),"hidden"in document&&(chrome.bookmarks.onCreated.addListener(t),chrome.bookmarks.onChanged.addListener(t),chrome.bookmarks.onRemoved.addListener(t),chrome.bookmarks.onMoved.addListener(t))}function t(){document.hidden&&window.location.reload()}function o(e){var t=e.target.value.trim(),o=document.getElementById("desc");o&&(o.textContent=t)}function n(e){if(e.target.closest(".c-upload__input")){e.preventDefault();var t=JSON.parse(e.target.getAttribute("data-id"));t.target=e.target,f.default.uploadScreen(t)}}function a(e){if(e.target.matches(".bookmark__del--bookmark"))f.default.removeBookmark(e);else if(e.target.closest(".bookmark__del--folder"))f.default.removeFolder(e);else if(e.target.closest(".bookmark__edit"))_.show(e.target.closest(".bookmark__edit"));else if(e.target.matches(".bookmark__screen")){e.preventDefault();var t=e.target.closest(".bookmark"),o=t.getAttribute("data-sort"),n=t.querySelector(".bookmark__link").href;f.default.createScreen(t,o,n)}else e.target.matches("#add")&&_.show(e.target)}function r(e){e.preventDefault();var t=this.getAttribute("data-action"),o=document.getElementById("title").value,n=document.getElementById("url").value;"New"!==t?f.default.updateBookmark(t,o,n)&&_.hide():f.default.createBookmark(o,n)&&_.hide()}function i(e){if(e.preventDefault(),confirm(chrome.i18n.getMessage("confirm_delete_image"))){var t=e.target,o=t.getAttribute("data-bookmark");f.default.rmCustomScreen(o,function(){var e=u.querySelector('[data-sort="'+o+'"]');e.querySelector(".bookmark__img").style.backgroundImage="",e.querySelector(".bookmark__img").classList.remove("bookmark__img--contain"),e.querySelector(".bookmark__img").classList.add("bookmark__img--folder"),e.querySelector(".bookmark__edit").removeAttribute("data-screen"),t.closest("#customScreen").style.display="",s.default.notifications(chrome.i18n.getMessage("notice_image_removed"))})}}function l(e){if(e.detail.target){var t=e.detail.target,n=t.dataset.id||"New";if("New"!==n){var a=t.dataset.title,r=t.dataset.url,i=t.dataset.screen;i&&!r&&(p.style.display="block",p.querySelector("img").src=i+"?refresh="+Date.now(),p.querySelector("#resetCustomImage").setAttribute("data-bookmark",n)),h.innerHTML='\n          <h4 class="modal__title">'+chrome.i18n.getMessage("edit_bookmark")+'</h4>\n          <span id="desc">'+a+"</span>\n        ",g.value=a,r?(v.style.display="",v.value=r):v.style.display="none",g.addEventListener("input",o)}else setTimeout(function(){g.focus()},150),h.innerHTML='<div class="modal__title">'+chrome.i18n.getMessage("add_bookmark")+"</div>",v.style.display="",g.value="",v.value="";m.setAttribute("data-action",n)}}function c(){g.removeEventListener("input",o),p.style.display="",m.reset()}var d=document.getElementById("modal"),u=document.getElementById("includeThree"),m=document.getElementById("formBookmark"),h=document.getElementById("modalHead"),g=document.getElementById("title"),v=document.getElementById("url"),p=document.getElementById("customScreen"),_=void 0;return{init:e}}();document.documentElement.setAttribute("lang",chrome.i18n.getMessage("@@ui_locale")),(0,h.default)(),i.default.init(".md-ripple"),d.default.init(),v.default.calculateStyles(),v.default.setBG(),f.default.init(),_.init(),window.addEventListener("resize",function(){return v.default.calculateStyles()}),window.addEventListener("online",a),window.addEventListener("offline",a),window.addEventListener("load",function(){navigator.onLine||s.default.trigger("offline",window)})},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),o(9);var a=o(10),r=n(a),i=o(1),l=n(i),s=o(0),c=n(s),d=function(){function e(){if(S){if(localStorage.getItem("custom_dials")||localStorage.setItem("custom_dials","{}"),l.default.init(500),l.default.usedAndRemaining(function(e){0===e&&(localStorage.setItem("custom_dials","{}"),localStorage.setItem("background_local",""))}),"true"===localStorage.getItem("vertical_center")&&document.getElementById("content").classList.add("flex-vertical-center"),d(t()),"false"===localStorage.getItem("show_settings_icon")){var e=document.getElementById("settings_icon");e.parentNode.removeChild(e)}if("false"===localStorage.getItem("show_toolbar"))document.getElementById("header").remove(),document.getElementById("main").classList.add("hidden-toolbar");else{var n=document.getElementById("searchReset");o();var a=c.default.debounce(function(e){e.target.value.length>0?n.classList.add("show"):n.classList.remove("show"),m(e)},500),i=document.getElementById("bookmarkSearch");i.addEventListener("input",a,!1),n.addEventListener("click",function(){i.value="",d(t()),i.focus(),n.classList.remove("show"),"true"===localStorage.getItem("drag_and_drop")&&D.option("disabled",!1)},!1)}window.addEventListener("hashchange",function(){d(t()),"true"===localStorage.getItem("show_toolbar")&&o()},!1),"true"===localStorage.getItem("drag_and_drop")&&(D=r.default.create(S,{animation:200,filter:".bookmark__control",draggable:".column",ghostClass:"column--ghost",chosenClass:"column--chosen",preventOnFilter:!1,onUpdate:function(){Array.prototype.slice.call(S.querySelectorAll(".bookmark")).forEach(function(e,t){w.move(e.getAttribute("data-sort"),{parentId:S.getAttribute("data-folder"),index:t})})}}))}}function t(){var e=localStorage.getItem("default_folder_id");return""!==window.location.hash&&(e=window.location.hash.slice(1)),e}function o(){var e=document.getElementById("selectFolder");e.innerHTML="",e.removeEventListener("change",h,!1),w.getTree(function(o){var n=[],a=[],r=void 0,i=void 0;for(a.push(o[0].children[0]),a.push(o[0].children[1]);void 0!==(r=a.pop());)if(void 0!==r.children){for("0"===r.parentId&&(r.path=""),r.path+=r.title;void 0!==(i=r.children.pop());)void 0!==i.children&&(i.path=r.path+"/",a.push(i));n.push(r)}n.sort(function(e,t){return e.path.localeCompare(t.path)});var l=[];n.forEach(function(e){l.push("<option"+(e.id===t()?" selected":"")+' value="'+e.id+'">'+e.path+"</option>")}),e.innerHTML=l.join(""),e.addEventListener("change",h,!1)})}function n(e){var t="true"===localStorage.getItem("show_favicon")?'<img class="bookmark__favicon" width="16" height="16" src="chrome://favicon/%url%" alt="">':"",o=s(e.id),n=o?'<div class="bookmark__img" style="background-image: url(\''+o+"');\"></div>":'<div class="bookmark__img bookmark__img--external"\n            data-fail-thumb="/img/broken-image.svg"\n            data-external-thumb="%thumbnailing_service%">\n      </div>',a='<div class="column">\n        <div class="bookmark" data-sort="%id%">\n          '+n+'\n          <div class="bookmark__control bookmark__control--left">\n            <div class="bookmark__more">\n              <div class="bookmark__control-wrap">\n                <button class="bookmark__edit"\n                        data-bookmark="bookmark"\n                        data-title="%title%"\n                        data-url="%url%"\n                        data-id="%id%"\n                        data-screen="%screen%">\n                </button>\n                <div class="bookmark__divider"></div>\n                <button class="bookmark__screen" data-id="%id%"></button>\n                <div class="bookmark__divider"></div>\n                <div class="bookmark__image-upload">\n                  <input type="file" name="" class="c-upload__input"\n                         id="upload-%id%"\n                         data-id=\'{"id": %id%, "site": "%site%"}\'\n                         accept=".jpg, .jpeg, .png">\n                  <label for="upload-%id%" class="c-upload__label"></label>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="bookmark__control bookmark__control--right">\n            <button class="bookmark__del--bookmark" data-id="%id%"></button>\n          </div>\n          <div class="bookmark__caption">\n            '+t+'\n            <div class="bookmark__title">%title%</div>\n          </div>\n          <a class="bookmark__link" href="%url%" title="%title%"></a>\n        </div>\n      </div>';return c.default.templater(a,{id:e.id,url:e.url,site:c.default.getDomain(e.url),screen:o,thumbnailing_service:localStorage.getItem("thumbnailing_service").replace("[URL]",c.default.getDomain(e.url)),title:e.title})}function a(e){var t=void 0,o=s(e.id);t=o?'<div class="bookmark__img bookmark__img--contain" style="background-image: url('+o+')"></div>':'<div class="bookmark__img bookmark__img--folder"></div>';var n='<div class="column">\n        <div class="bookmark" data-sort="%id%">\n          '+t+'\n          <div class="bookmark__control bookmark__control--left">\n            <div class="bookmark__more">\n              <div class="bookmark__control-wrap">\n                <button class="bookmark__edit" data-bookmark="folder"\n                        data-title="%title%"\n                        data-id="%id%"\n                        data-screen="%screen%">\n                </button>\n                <div class="bookmark__divider"></div>\n                <div class="bookmark__image-upload">\n                  <input type="file" name="" class="c-upload__input"\n                         id="upload-%id%"\n                         data-id=\'{"id": %id%}\'\n                         accept=".jpg, .jpeg, .png">\n                  <label for="upload-%id%" class="c-upload__label"></label>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="bookmark__control bookmark__control--right">\n            <button class="bookmark__del--folder" data-id="%id%"></button>\n          </div>\n          <div class="bookmark__caption">\n            <img src="/img/folder.svg" class="bookmark__favicon" width="16" height="16" alt="">\n            <div class="bookmark__title">%title%</div>\n          </div>\n          <a class="bookmark__link" href="#%url%" title="%title%"></a>\n        </div>\n      </div>';return c.default.templater(n,{id:e.id,url:e.id,title:e.title,screen:o})}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[];e.forEach(function(e){void 0!==e.url&&o.push(n(e)),void 0!==e.children&&o.push(a(e))}),S.innerHTML=o.join("")+"\n      "+(t?'<div class="column--nosort">\n          <div class="bookmark--create md-ripple">\n            <div class="bookmark__img--add"></div>\n            <a class="bookmark__link--create" id="add"></a>\n          </div>\n        </div>':"")+"\n    ";var r=S.querySelectorAll(".bookmark__img--external"),i=!0,l=!1,s=void 0;try{for(var d,u=r[Symbol.iterator]();!(i=(d=u.next()).done);i=!0){var f=d.value;!function(e){c.default.imageLoaded(e.dataset.externalThumb,{done:function(t){e.style.backgroundImage="url("+t+")"},fail:function(){e.style.backgroundImage="url("+e.dataset.failThumb+")"}})}(f)}}catch(e){l=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(l)throw s}}}function s(e){var t=JSON.parse(localStorage.getItem("custom_dials")),o=void 0;return t&&(o=t[e]),o}function d(e){var t="true"===localStorage.getItem("show_create_column");w.getSubTree(e,function(o){void 0!==o?(i(o[0].children,t),S.setAttribute("data-folder",e)):c.default.notifications(chrome.i18n.getMessage("notice_cant_find_id"),15e3)})}function u(e){var t=e.target,o=e.id,n=e.site,a=t.files[0];if(a){if(!/image\/(jpe?g|png)$/.test(a.type))return alert(chrome.i18n.getMessage("alert_file_type_fail"));t.value="";var r=t.closest(".bookmark");r.innerHTML+='<div id="overlay_id_'+o+'" class="bookmark__overlay">'+E+"</div>";var i=new FileReader;i.readAsDataURL(a),i.onload=function(){c.default.resizeScreen(i.result,function(t){var a=c.default.base64ToBlob(t,"image/jpg"),i=void 0;i=n?n+"_"+o+".jpg":"folder-"+o+".jpg",l.default.createDir("images",function(){l.default.createFile("/images/"+i,{file:a,fileType:"jpg"},function(t){var n=JSON.parse(localStorage.getItem("custom_dials"));n[o]=t.toURL(),localStorage.setItem("custom_dials",JSON.stringify(n));var a=r.querySelector(".bookmark__img"),i=r.querySelector(".bookmark__edit");e.site?a.classList.remove("bookmark__img--external"):(a.classList.remove("bookmark__img--folder"),a.classList.add("bookmark__img--contain")),i.setAttribute("data-screen",t.toURL()),a.style.backgroundImage="url('"+t.toURL()+"?refresh="+Date.now()+"')";var l=document.getElementById("overlay_id_"+o);l&&r.removeChild(l),c.default.notifications(chrome.i18n.getMessage("notice_thumb_image_updated"))})})})},i.onerror=function(){console.warn("Image upload failed")}}}function f(e,t,o){e.innerHTML+='<div id="overlay_id_'+t+'" class="bookmark__overlay">'+E+"</div>";var n=e.querySelector(".bookmark__img");chrome.runtime.sendMessage({captureUrl:o,id:t},function(o){var a=document.getElementById("overlay_id_"+t);if(o.warning)return console.warn(o.warning),a&&e.removeChild(a),!1;n.classList.remove("bookmark__img--external"),n.style.backgroundImage="url('"+o+"?refresh="+Date.now()+"')",a&&e.removeChild(a)})}function m(e){var o=e.target.value.trim().toLowerCase();w.search(o,function(e){e.length>0?("true"===localStorage.getItem("drag_and_drop")&&D.option("disabled",!0),i(e)):("true"===localStorage.getItem("drag_and_drop")&&D.option("disabled",!1),d(t()))})}function h(){var e=this.value;window.location.hash="#"+e,d(e)}function g(e){e.preventDefault();var t=e.target,o=t.closest(".column");if(confirm(chrome.i18n.getMessage("confirm_delete_bookmark"),"")){var n=t.getAttribute("data-id");w.remove(n,function(){S.removeChild(o),p(n),c.default.notifications(chrome.i18n.getMessage("notice_bookmark_removed"))})}}function v(e){e.preventDefault();var t=e.target,n=t.closest(".column");if(confirm(chrome.i18n.getMessage("confirm_delete_folder"),"")){var a=t.getAttribute("data-id");w.removeTree(a,function(){S.removeChild(n),p(a),o(),c.default.notifications(chrome.i18n.getMessage("notice_folder_removed"))})}}function p(e,t){var o=s(e);if(o){var n=o.split("/").pop();l.default.deleteFile("/images/"+n,function(){var o=JSON.parse(localStorage.getItem("custom_dials"));delete o[e],localStorage.setItem("custom_dials",JSON.stringify(o)),t&&t()})}}function b(e){return!!/^(http|https|ftp|file|chrome|chrome-extension):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(e)}function _(e,t){if(0!==e.length)return b(t)||0===t.length||(t="http://"+t),{title:e,url:t}}function k(e,t){var o=_(e,t);return void 0!==o?(o.parentId=S.getAttribute("data-folder"),w.create(o,function(e){var t=void 0;t=e.url?n(e):a(e),S.querySelector(".column--nosort").insertAdjacentHTML("beforeBegin",t);var o=S.querySelector('[data-sort="'+e.id+'"]');if(e.url)if("true"===localStorage.getItem("auto_generate_thumbnail"))f(o,e.id,e.url);else{var r=o.querySelector(".bookmark__img");r.classList.add("bookmark__img--external"),c.default.imageLoaded(r.dataset.externalThumb,{done:function(e){r.style.backgroundImage="url("+e+")"},fail:function(){r.style.backgroundImage=r.dataset.failThumb}})}}),!0):(alert(chrome.i18n.getMessage("alert_create_fail_bookmark")),!1)}function y(e,t,o){var n=_(t,o),a=S.querySelector('[data-sort="'+e+'"]'),r=a.querySelector(".bookmark__edit");return 0===o.length||b(o)||(n=void 0),void 0!==n?(w.update(e,n,function(e){a.querySelector(".bookmark__link").href=e.url?e.url:"#"+e.id,a.querySelector(".bookmark__title").textContent=e.title,a.querySelector(".bookmark__link").title=e.title,e.url&&r.setAttribute("data-url",e.url),r.setAttribute("data-title",e.title),c.default.notifications(chrome.i18n.getMessage("notice_bookmark_updated"))}),!0):(alert(chrome.i18n.getMessage("alert_update_fail_bookmark")),!1)}var w=chrome.bookmarks,E='\n    <svg class="loading" viewBox= "0 0 100 100" xmlns= "http://www.w3.org/2000/svg" >\n      <circle class="path" fill="none" stroke-width="8" stroke-linecap="round" cx="50" cy="50" r="40"></circle>\n    </svg>\n  ',S=document.getElementById("includeThree"),D=null;return{init:e,createBookmark:k,updateBookmark:y,removeBookmark:g,removeFolder:v,createScreen:f,uploadScreen:u,rmCustomScreen:p}}();t.default=d},function(e,t){e.exports="/img/broken-image.svg"},function(e,t,o){var n,a;/**!
 * Sortable
 * @author	RubaXa   <trash@rubaxa.org>
 * @license MIT
 */
!function(r){"use strict";n=r,void 0!==(a="function"==typeof n?n.call(t,o,t,e):n)&&(e.exports=a)}(function(){"use strict";function e(t,o){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=o=_({},o),t[J]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==e.supportPointer};for(var a in n)!(a in o)&&(o[a]=n[a]);de(o);for(var i in this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!o.forceFallback&&oe,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),o.supportPointer&&r(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),se.push(this._onDragOver),o.store&&this.sort(o.store.get(this))}function t(e,t){"clone"!==e.lastPullMode&&(t=!0),L&&L.state!==t&&(s(L,"display",t?"none":""),t||L.state&&(e.options.group.revertClone?(x.insertBefore(L,T),e._animate(S,L)):x.insertBefore(L,S)),L.state=t)}function o(e,t,o){if(e){o=o||G;do{if(">*"===t&&e.parentNode===o||p(e,t))return e}while(e=n(e))}return null}function n(e){var t=e.host;return t&&t.nodeType?t:e.parentNode}function a(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function r(e,t,o){e.addEventListener(t,o,ee)}function i(e,t,o){e.removeEventListener(t,o,ee)}function l(e,t,o){if(e)if(e.classList)e.classList[o?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(W," ").replace(" "+t+" "," ");e.className=(n+(o?" "+t:"")).replace(W," ")}}function s(e,t,o){var n=e&&e.style;if(n){if(void 0===o)return G.defaultView&&G.defaultView.getComputedStyle?o=G.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in n||(t="-webkit-"+t),n[t]=o+("string"==typeof o?"":"px")}}function c(e,t,o){if(e){var n=e.getElementsByTagName(t),a=0,r=n.length;if(o)for(;a<r;a++)o(n[a],a);return n}return[]}function d(e,t,o,n,a,r,i,l){e=e||t[J];var s=G.createEvent("Event"),c=e.options,d="on"+o.charAt(0).toUpperCase()+o.substr(1);s.initEvent(o,!0,!0),s.to=a||t,s.from=r||t,s.item=n||t,s.clone=L,s.oldIndex=i,s.newIndex=l,t.dispatchEvent(s),c[d]&&c[d].call(e,s)}function u(e,t,o,n,a,r,i,l){var s,c,d=e[J],u=d.options.onMove;return s=G.createEvent("Event"),s.initEvent("move",!0,!0),s.to=t,s.from=e,s.dragged=o,s.draggedRect=n,s.related=a||t,s.relatedRect=r||t.getBoundingClientRect(),s.willInsertAfter=l,e.dispatchEvent(s),u&&(c=u.call(d,s,i)),c}function f(e){e.draggable=!1}function m(){ae=!1}function h(e,t){var o=e.lastElementChild,n=o.getBoundingClientRect();return t.clientY-(n.top+n.height)>5||t.clientX-(n.left+n.width)>5}function g(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,n=0;o--;)n+=t.charCodeAt(o);return n.toString(36)}function v(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!p(e,t)||o++;return o}function p(e,t){if(e){t=t.split(".");var o=t.shift().toUpperCase(),n=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==o&&e.nodeName.toUpperCase()!=o||t.length&&((" "+e.className+" ").match(n)||[]).length!=t.length)}return!1}function b(e,t){var o,n;return function(){void 0===o&&(o=arguments,n=this,V(function(){1===o.length?e.call(n,o[0]):e.apply(n,o),o=void 0},t))}}function _(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function k(e){return Z&&Z.dom?Z.dom(e).cloneNode(!0):$?$(e).clone(!0)[0]:e.cloneNode(!0)}function y(e){for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var n=t[o];n.checked&&le.push(n)}}function w(e){return V(e,0)}function E(e){return clearTimeout(e)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var S,D,I,L,x,T,C,B,M,N,O,A,P,j,R,F,q,Y,X,U,H={},W=/\s+/g,z=/left|right|inline/,J="Sortable"+(new Date).getTime(),Q=window,G=Q.document,K=Q.parseInt,V=Q.setTimeout,$=Q.jQuery||Q.Zepto,Z=Q.Polymer,ee=!1,te=!1,oe="draggable"in G.createElement("div"),ne=function(e){return!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&(e=G.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents)}(),ae=!1,re=Math.abs,ie=Math.min,le=[],se=[],ce=b(function(e,t,o){if(o&&t.scroll){var n,a,r,i,l,s,c=o[J],d=t.scrollSensitivity,u=t.scrollSpeed,f=e.clientX,m=e.clientY,h=window.innerWidth,g=window.innerHeight;if(M!==o&&(B=t.scroll,M=o,N=t.scrollFn,!0===B)){B=o;do{if(B.offsetWidth<B.scrollWidth||B.offsetHeight<B.scrollHeight)break}while(B=B.parentNode)}B&&(n=B,a=B.getBoundingClientRect(),r=(re(a.right-f)<=d)-(re(a.left-f)<=d),i=(re(a.bottom-m)<=d)-(re(a.top-m)<=d)),r||i||(r=(h-f<=d)-(f<=d),i=(g-m<=d)-(m<=d),(r||i)&&(n=Q)),H.vx===r&&H.vy===i&&H.el===n||(H.el=n,H.vx=r,H.vy=i,clearInterval(H.pid),n&&(H.pid=setInterval(function(){if(s=i?i*u:0,l=r?r*u:0,"function"==typeof N)return N.call(c,l,s,e);n===Q?Q.scrollTo(Q.pageXOffset+l,Q.pageYOffset+s):(n.scrollTop+=s,n.scrollLeft+=l)},24)))}},30),de=function(e){function t(e,t){return void 0!==e&&!0!==e||(e=o.name),"function"==typeof e?e:function(o,n){var a=n.options.group.name;return t?e:e&&(e.join?e.indexOf(a)>-1:a==e)}}var o={},n=e.group;n&&"object"==typeof n||(n={name:n}),o.name=n.name,o.checkPull=t(n.pull,!0),o.checkPut=t(n.put),o.revertClone=n.revertClone,e.group=o};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){te=!1,ee={capture:!1,passive:te}}}))}catch(e){}return e.prototype={constructor:e,_onTapStart:function(e){var t,n=this,a=this.el,r=this.options,i=r.preventOnFilter,l=e.type,s=e.touches&&e.touches[0],c=(s||e).target,u=e.target.shadowRoot&&e.path&&e.path[0]||c,f=r.filter;if(y(a),!S&&!(/mousedown|pointerdown/.test(l)&&0!==e.button||r.disabled)&&!u.isContentEditable&&(c=o(c,r.draggable,a))&&C!==c){if(t=v(c,r.draggable),"function"==typeof f){if(f.call(this,e,c,this))return d(n,u,"filter",c,a,a,t),void(i&&e.preventDefault())}else if(f&&(f=f.split(",").some(function(e){if(e=o(u,e.trim(),a))return d(n,e,"filter",c,a,a,t),!0})))return void(i&&e.preventDefault());r.handle&&!o(u,r.handle,a)||this._prepareDragStart(e,s,c,t)}},_prepareDragStart:function(e,t,o,n){var a,i=this,s=i.el,u=i.options,m=s.ownerDocument;o&&!S&&o.parentNode===s&&(Y=e,x=s,S=o,D=S.parentNode,T=S.nextSibling,C=o,F=u.group,j=n,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,S.style["will-change"]="all",a=function(){i._disableDelayedDrag(),S.draggable=i.nativeDraggable,l(S,u.chosenClass,!0),i._triggerDragStart(e,t),d(i,x,"choose",S,x,x,j)},u.ignore.split(",").forEach(function(e){c(S,e.trim(),f)}),r(m,"mouseup",i._onDrop),r(m,"touchend",i._onDrop),r(m,"touchcancel",i._onDrop),r(m,"selectstart",i),u.supportPointer&&r(m,"pointercancel",i._onDrop),u.delay?(r(m,"mouseup",i._disableDelayedDrag),r(m,"touchend",i._disableDelayedDrag),r(m,"touchcancel",i._disableDelayedDrag),r(m,"mousemove",i._disableDelayedDrag),r(m,"touchmove",i._disableDelayedDrag),u.supportPointer&&r(m,"pointermove",i._disableDelayedDrag),i._dragStartTimer=V(a,u.delay)):a())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),i(e,"mouseup",this._disableDelayedDrag),i(e,"touchend",this._disableDelayedDrag),i(e,"touchcancel",this._disableDelayedDrag),i(e,"mousemove",this._disableDelayedDrag),i(e,"touchmove",this._disableDelayedDrag),i(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){t=t||("touch"==e.pointerType?e:null),t?(Y={target:S,clientX:t.clientX,clientY:t.clientY},this._onDragStart(Y,"touch")):this.nativeDraggable?(r(S,"dragend",this),r(x,"dragstart",this._onDragStart)):this._onDragStart(Y,!0);try{G.selection?w(function(){G.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(x&&S){var t=this.options;l(S,t.ghostClass,!0),l(S,t.dragClass,!1),e.active=this,d(this,x,"start",S,x,x,j)}else this._nulling()},_emulateDragOver:function(){if(X){if(this._lastX===X.clientX&&this._lastY===X.clientY)return;this._lastX=X.clientX,this._lastY=X.clientY,ne||s(I,"display","none");var e=G.elementFromPoint(X.clientX,X.clientY),t=e,o=se.length;if(e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(X.clientX,X.clientY),t=e),t)do{if(t[J]){for(;o--;)se[o]({clientX:X.clientX,clientY:X.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);ne||s(I,"display","")}},_onTouchMove:function(t){if(Y){var o=this.options,n=o.fallbackTolerance,a=o.fallbackOffset,r=t.touches?t.touches[0]:t,i=r.clientX-Y.clientX+a.x,l=r.clientY-Y.clientY+a.y,c=t.touches?"translate3d("+i+"px,"+l+"px,0)":"translate("+i+"px,"+l+"px)";if(!e.active){if(n&&ie(re(r.clientX-this._lastX),re(r.clientY-this._lastY))<n)return;this._dragStarted()}this._appendGhost(),U=!0,X=r,s(I,"webkitTransform",c),s(I,"mozTransform",c),s(I,"msTransform",c),s(I,"transform",c),t.preventDefault()}},_appendGhost:function(){if(!I){var e,t=S.getBoundingClientRect(),o=s(S),n=this.options;I=S.cloneNode(!0),l(I,n.ghostClass,!1),l(I,n.fallbackClass,!0),l(I,n.dragClass,!0),s(I,"top",t.top-K(o.marginTop,10)),s(I,"left",t.left-K(o.marginLeft,10)),s(I,"width",t.width),s(I,"height",t.height),s(I,"opacity","0.8"),s(I,"position","fixed"),s(I,"zIndex","100000"),s(I,"pointerEvents","none"),n.fallbackOnBody&&G.body.appendChild(I)||x.appendChild(I),e=I.getBoundingClientRect(),s(I,"width",2*t.width-e.width),s(I,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var o=this,n=e.dataTransfer,a=o.options;o._offUpEvents(),F.checkPull(o,o,S,e)&&(L=k(S),L.draggable=!1,L.style["will-change"]="",s(L,"display","none"),l(L,o.options.chosenClass,!1),o._cloneId=w(function(){x.insertBefore(L,S),d(o,x,"clone",S)})),l(S,a.dragClass,!0),t?("touch"===t?(r(G,"touchmove",o._onTouchMove),r(G,"touchend",o._onDrop),r(G,"touchcancel",o._onDrop),a.supportPointer&&(r(G,"pointermove",o._onTouchMove),r(G,"pointerup",o._onDrop))):(r(G,"mousemove",o._onTouchMove),r(G,"mouseup",o._onDrop)),o._loopId=setInterval(o._emulateDragOver,50)):(n&&(n.effectAllowed="move",a.setData&&a.setData.call(o,n,S)),r(G,"drop",o),o._dragStartId=w(o._dragStarted))},_onDragOver:function(n){var a,r,i,l,c=this.el,d=this.options,f=d.group,g=e.active,v=F===f,p=!1,b=d.sort;if(void 0!==n.preventDefault&&(n.preventDefault(),!d.dragoverBubble&&n.stopPropagation()),!S.animated&&(U=!0,g&&!d.disabled&&(v?b||(l=!x.contains(S)):q===this||(g.lastPullMode=F.checkPull(this,g,S,n))&&f.checkPut(this,g,S,n))&&(void 0===n.rootEl||n.rootEl===this.el))){if(ce(n,d,this.el),ae)return;if(a=o(n.target,d.draggable,c),r=S.getBoundingClientRect(),q!==this&&(q=this,p=!0),l)return t(g,!0),D=x,void(L||T?x.insertBefore(S,L||T):b||x.appendChild(S));if(0===c.children.length||c.children[0]===I||c===n.target&&h(c,n)){if(0!==c.children.length&&c.children[0]!==I&&c===n.target&&(a=c.lastElementChild),a){if(a.animated)return;i=a.getBoundingClientRect()}t(g,v),!1!==u(x,c,S,r,a,i,n)&&(S.contains(c)||(c.appendChild(S),D=c),this._animate(r,S),a&&this._animate(i,a))}else if(a&&!a.animated&&a!==S&&void 0!==a.parentNode[J]){O!==a&&(O=a,A=s(a),P=s(a.parentNode)),i=a.getBoundingClientRect();var _=i.right-i.left,k=i.bottom-i.top,y=z.test(A.cssFloat+A.display)||"flex"==P.display&&0===P["flex-direction"].indexOf("row"),w=a.offsetWidth>S.offsetWidth,E=a.offsetHeight>S.offsetHeight,C=(y?(n.clientX-i.left)/_:(n.clientY-i.top)/k)>.5,B=a.nextElementSibling,M=!1;if(y){var N=S.offsetTop,j=a.offsetTop;M=N===j?a.previousElementSibling===S&&!w||C&&w:a.previousElementSibling===S||S.previousElementSibling===a?(n.clientY-i.top)/k>.5:j>N}else p||(M=B!==S&&!E||C&&E);var R=u(x,c,S,r,a,i,n,M);!1!==R&&(1!==R&&-1!==R||(M=1===R),ae=!0,V(m,30),t(g,v),S.contains(c)||(M&&!B?c.appendChild(S):a.parentNode.insertBefore(S,M?B:a)),D=S.parentNode,this._animate(r,S),this._animate(i,a))}}},_animate:function(e,t){var o=this.options.animation;if(o){var n=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),s(t,"transition","none"),s(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,s(t,"transition","all "+o+"ms"),s(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=V(function(){s(t,"transition",""),s(t,"transform",""),t.animated=!1},o)}},_offUpEvents:function(){var e=this.el.ownerDocument;i(G,"touchmove",this._onTouchMove),i(G,"pointermove",this._onTouchMove),i(e,"mouseup",this._onDrop),i(e,"touchend",this._onDrop),i(e,"pointerup",this._onDrop),i(e,"touchcancel",this._onDrop),i(e,"pointercancel",this._onDrop),i(e,"selectstart",this)},_onDrop:function(t){var o=this.el,n=this.options;clearInterval(this._loopId),clearInterval(H.pid),clearTimeout(this._dragStartTimer),E(this._cloneId),E(this._dragStartId),i(G,"mouseover",this),i(G,"mousemove",this._onTouchMove),this.nativeDraggable&&(i(G,"drop",this),i(o,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(U&&(t.preventDefault(),!n.dropBubble&&t.stopPropagation()),I&&I.parentNode&&I.parentNode.removeChild(I),x!==D&&"clone"===e.active.lastPullMode||L&&L.parentNode&&L.parentNode.removeChild(L),S&&(this.nativeDraggable&&i(S,"dragend",this),f(S),S.style["will-change"]="",l(S,this.options.ghostClass,!1),l(S,this.options.chosenClass,!1),d(this,x,"unchoose",S,D,x,j),x!==D?(R=v(S,n.draggable))>=0&&(d(null,D,"add",S,D,x,j,R),d(this,x,"remove",S,D,x,j,R),d(null,D,"sort",S,D,x,j,R),d(this,x,"sort",S,D,x,j,R)):S.nextSibling!==T&&(R=v(S,n.draggable))>=0&&(d(this,x,"update",S,D,x,j,R),d(this,x,"sort",S,D,x,j,R)),e.active&&(null!=R&&-1!==R||(R=j),d(this,x,"end",S,D,x,j,R),this.save()))),this._nulling()},_nulling:function(){x=S=D=I=T=L=C=B=M=Y=X=U=R=O=A=q=F=e.active=null,le.forEach(function(e){e.checked=!0}),le.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":S&&(this._onDragOver(e),a(e));break;case"mouseover":this._onDrop(e);break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,a=0,r=n.length,i=this.options;a<r;a++)e=n[a],o(e,i.draggable,this.el)&&t.push(e.getAttribute(i.dataIdAttr)||g(e));return t},sort:function(e){var t={},n=this.el;this.toArray().forEach(function(e,a){var r=n.children[a];o(r,this.options.draggable,n)&&(t[e]=r)},this),e.forEach(function(e){t[e]&&(n.removeChild(t[e]),n.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return o(e,t||this.options.draggable,this.el)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];o[e]=t,"group"===e&&de(o)},destroy:function(){var e=this.el;e[J]=null,i(e,"mousedown",this._onTapStart),i(e,"touchstart",this._onTapStart),i(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(i(e,"dragover",this),i(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),se.splice(se.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},r(G,"touchmove",function(t){e.active&&t.preventDefault()}),e.utils={on:r,off:i,css:s,find:c,is:function(e,t){return!!o(e,t,e)},extend:_,throttle:b,closest:o,toggleClass:l,clone:k,index:v,nextTick:w,cancelNextTick:E},e.create=function(t,o){return new e(t,o)},e.version="1.7.0",e})},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(0),a=function(e){return e&&e.__esModule?e:{default:e}}(n),r=function(){return{setBG:function(){var e=document.getElementById("bg"),t=localStorage.getItem("background_image");if("background_color"===t)return e.style.backgroundColor=localStorage.getItem("background_color"),void setTimeout(function(){e.style.opacity=1},20);var o="background_local"===t?localStorage.getItem("background_local"):localStorage.getItem("background_external");o&&""!==o&&a.default.imageLoaded(o,{done:function(t){document.body.classList.add("stealth-header"),e.style.backgroundImage="url('"+t+"')",e.style.opacity=1},fail:function(t){console.warn("Local background image resource problem: "+t),e.style.opacity=1}})},calculateStyles:function(){var e=parseInt(localStorage.getItem("dial_columns")),t=document.getElementById("generateStyles");if(e>=8&&window.innerWidth<1200){var o=Math.floor(1170/e),n=o/(4/3);return void(t.innerHTML="\n          .bookmarks {justify-content: center}\n          .column, .column--nosort {width: "+o+"px; height: "+n+"px}\n        ")}if(!(window.innerWidth<768)){var a=Math.floor(document.getElementById("includeThree").offsetWidth),r=Math.floor(a/e),i=r/(4/3);t.innerHTML=".column, .column--nosort {width: "+r+"px; height: "+i+"px}"}}}}();t.default=r},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(){function e(t){n(this,e),this.body=document.body,this.modal=t,this.backdrop=null,this.activeElement=null,this.focusableEls=null,this.focusableElFirst=null,this.focusableElLast=null,this.pageY=0,this.active=!1,this.classNames={BACKDROP:"modal-backdrop",OPEN:"modal-open",SHOW:"show",FADE:"fade",FIXED:"fixed"},this.wrapElem=document.querySelector("main"),this.duration=150,this.init()}return a(e,[{key:"init",value:function(){this.modal.setAttribute("tabIndex",-1),this.focusableEls=Array.prototype.slice.call(this.modal.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')),this.focusableElFirst=this.focusableEls[0],this.focusableElLast=this.focusableEls[this.focusableEls.length-1],this.activeElement=document.activeElement,this.modal.addEventListener("keydown",this.handleKeyDown.bind(this))}},{key:"handleKeyDown",value:function(e){var t=this;switch(e.which){case 9:if(1===this.focusableEls.length){e.preventDefault();break}e.shiftKey?function(){document.activeElement===t.focusableElFirst&&(e.preventDefault(),t.focusableElLast.focus())}():function(){document.activeElement===t.focusableElLast&&(e.preventDefault(),t.focusableElFirst.focus())}();break;case 27:this.hide()}}},{key:"customEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new CustomEvent("modal."+e,{detail:{target:t}})}},{key:"createBackdrop",value:function(){this.backdrop||(this.backdrop=document.createElement("div"),this.backdrop.className="modal-overlay",this.body.appendChild(this.backdrop))}},{key:"removeBackdrop",value:function(){this.backdrop&&(this.body.removeChild(this.backdrop),this.backdrop=null)}},{key:"fixWrapper",value:function(){this.pageY=window.pageYOffset,this.wrapElem.classList.add(this.classNames.FIXED),this.wrapElem.style.top="-"+this.pageY+"px"}},{key:"unfixWrapper",value:function(){this.wrapElem.style.top="",this.wrapElem.classList.remove(this.classNames.FIXED),window.scrollTo(0,this.pageY)}},{key:"show",value:function(e){var t=this;if(!this.active){this.fixWrapper();var o=this.customEvent("show",e);this.modal.dispatchEvent(o),this.createBackdrop(),this.backdrop.classList.add(this.classNames.SHOW),this.modal.classList.add(this.classNames.SHOW),this.body.classList.add(this.classNames.OPEN),this.modal.focus(),setTimeout(function(){t.backdrop.classList.add(t.classNames.FADE),t.modal.classList.add(t.classNames.FADE),setTimeout(function(){t.active=!0},t.duration)},10)}}},{key:"hide",value:function(){var e=this;this.active&&(this.modal.classList.remove(this.classNames.FADE),this.backdrop.classList.remove(this.classNames.FADE),setTimeout(function(){e.body.classList.remove(e.classNames.OPEN),e.unfixWrapper(),e.removeBackdrop(),e.modal.classList.remove(e.classNames.SHOW);var t=e.customEvent("hide");e.modal.dispatchEvent(t),e.active=!1},this.duration))}}]),e}();t.default=r}]);