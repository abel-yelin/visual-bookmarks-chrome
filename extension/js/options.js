!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default={transitionEnd:function(){var e={transition:"transitionend",webkitTransition:"webkitTransitionEnd"},t=document.createElement("fake");for(var n in e)if(void 0!==t.style[n])return e[n];return!1},debounce:function(e,t,n){var o=null;return function(){var r=this,i=arguments,a=function(){o=null,n||e.apply(r,i)},c=n&&!o;clearTimeout(o),o=setTimeout(a,t),c&&e.apply(r,i)}},trigger:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Event(e,o({bubbles:!1,cancelable:!1},n));t.dispatchEvent(r)},templater:function(e,t){return e.replace(/\%(.*?)\%/g,function(e,n){return t[n]||""})},escapeHtml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},notifications:function(e,t){t=t||e,chrome.notifications.create(t,{type:"basic",iconUrl:"icons/icon128.png",title:"Visual bookmarks",message:e},function(){})},imageLoaded:function(e,t){var n=new Image;n.onload=function(){t.done&&t.done(e)},n.onerror=function(){t.fail&&t.fail(e)},n.src=e},base64ToBlob:function(e,t,n){for(var o=e,r=t||"",i=atob(o.split(",")[1]),a=new ArrayBuffer(i.length),c=new Uint8Array(a),l=0;l<i.length;l++)c[l]=i.charCodeAt(l);var s=new Blob([a],{type:r});return n?n(s):s},resizeScreen:function(e,t){var n=new Image;n.onload=function(){300<n.height&&(n.width*=300/n.height,n.height=300);var e=document.createElement("canvas"),o=e.getContext("2d");e.width=n.width,e.height=n.height,o.drawImage(n,0,0,n.width,n.height),t(e.toDataURL("image/jpg"))},n.src=e},rand:function(e,t){return Math.round(e-.5+Math.random()*(t-e+1))},getDomain:function(e){return e.replace(/(https?|ftps?|chrome|chrome-extension|file):\/\/\/?(www.)?/i,"").replace(/:?\/.*/i,"")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e){var t="";switch(e.name){case"QuotaExceededError":t="QuotaExceededError";break;case"NotFoundError":t="NotFoundError";break;case"SecurityError":t="SecurityError";break;case"InvalidModificationError":t="InvalidModificationError";break;case"InvalidStateError":t="InvalidStateError";break;default:t="Unknown Error"}console.error(t)}var t=null;return{init:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,o=arguments[1];navigator.webkitPersistentStorage.requestQuota(1048576*n,function(n){window.webkitRequestFileSystem(window.PERSISTENT,n,function(e){t=e,o&&o()},e)},e)},usedAndRemaining:function(e){navigator.webkitPersistentStorage.queryUsageAndQuota(function(t,n){e&&e(t,n)})},createDir:function(n,o){t.root.getDirectory(n,{create:!0},function(e){o&&o(e)},e)},getDir:function(n,o){t.root.getDirectory(n,{},function(e){o&&o(e)},e)},deleteDir:function(n,o,r){o=o||{},void 0===o.recursive&&(o.recursive=!1),t.root.getDirectory(n,{},function(t){o.recursive?t.removeRecursively(function(){r&&r()},e):t.remove(function(){r&&r()},e)},e)},createFile:function(e,n,o){t.root.getFile(e,{create:!0},function(e){e.createWriter(function(t){t.onwriteend=function(){o&&o(e)},t.onerror=function(e){console.log(e)};var r=new Blob([n.file],{type:n.fileType});t.write(r)})})},deleteFile:function(n,o){t.root.getFile(n,{create:!1},function(t){t.remove(function(){o&&o()},e)},e)},purge:function(){t.root.createReader().readEntries(function(t){for(var n,o=0;n=t[o];++o)n.isDirectory?n.removeRecursively(function(){},e):n.remove(function(){},e);console.info("Local storage emptied.")},e)}}}();t.default=o},function(e,t){},function(e,t,n){!function(t,n){e.exports=function(){return function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=n(1);!function(e){e&&e.__esModule}(r),n(2);var i=function(){function e(e){var t=o(document.createElement("span"),{className:"ripple"});return e.appendChild(t),t}function t(t,n){if(1!==n.which)return!0;var o=n.target.closest(t);if(o){var r=getComputedStyle(o).position;o.classList.add("ripple-container"),"fixed"!==r&&"absolute"!==r&&(o.style.position="relative");var i=o.getAttribute("data-ripple-color")||"rgba(0,0,0, .3)",a=o.hasAttribute("data-ripple-center"),l=o.getBoundingClientRect(),s=l.width,u=l.height,d=l.left,f=l.top,m=n.clientX-d,g=n.clientY-f,p=Math.max(s,u),h=c=e(o),v=p/2;h.style.left=a?"50%":m-v+"px",h.style.top=a?"50%":g-v+"px",h.style.width=p+"px",h.style.height=p+"px",a&&(h.style.marginTop=-v+"px",h.style.marginLeft=-v+"px"),h.style.backgroundColor=i,setTimeout(function(){h.style.cssText+="transform: scale(2.5); opacity: 0.5"},10)}}function n(e,t){if("mouseout"===t.type&&!t.target.closest(e))return!0;if("mouseup"===t.type&&1!==t.which)return!0;if(!c)return!0;var n=getComputedStyle(c)["transition-duration"],o=1e3*parseFloat(n),r=c;c=null;var i=r.parentNode,a=i.getElementsByClassName("ripple");r.style.opacity=0,setTimeout(function(){i.removeChild(r),a.length<1&&(i.style.position="")},o)}var r={},i=void 0,a=void 0,c=void 0,l=!1;return r.init=function(e){if(!l){if("string"!=typeof e)throw new Error("Selector must be a string");i=t.bind(null,e),a=n.bind(null,e),document.body.addEventListener("mousedown",i),document.body.addEventListener("mouseout",a),document.body.addEventListener("mouseup",a),document.body.addEventListener("dragstart",a),l=!0}},r.destroy=function(){l&&(document.body.removeEventListener("mousedown",i),document.body.removeEventListener("mouseout",a),document.body.removeEventListener("mouseup",a),document.body.removeEventListener("dragstart",a),i=null,a=null,c=null,l=!1)},r}();t.default=i,e.exports=t.default},function(e,t){},function(e,t,n){"use strict";!function(e){"function"!=typeof e.matches&&(e.matches=e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),o=0;n[o]&&n[o]!==t;)++o;return Boolean(n[o])}),"function"!=typeof e.closest&&(e.closest=function(e){for(var t=this;t&&1===t.nodeType;){if(t.matches(e))return t;t=t.parentNode}return null})}(window.Element.prototype)}])}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Element.prototype.matches=Element.prototype.matches||function(e){for(var t=this,n=(t.document||t.ownerDocument).querySelectorAll(e),o=0;n[o]&&n[o]!==t;)++o;return!!n[o]},Element.prototype.closest=Element.prototype.closest||function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){Object.keys(o).forEach(function(e){null===localStorage.getItem(e)&&localStorage.setItem(e,o[e])}),["http://free.pagepeeker.com/v2/thumbs.php?size=x&url=[URL]","http://api.webthumbnail.org/?width=500&height=400&screen=1280&url=[URL]"].indexOf(localStorage.getItem("thumbnailing_service"))>-1&&localStorage.setItem("thumbnailing_service",o.thumbnailing_service)}function t(e){chrome.storage.sync.get(function(t){Object.keys(t).forEach(function(e){"default_folder_id"!==e&&localStorage.setItem(e,t[e])}),e&&e()})}function n(){var e={};Object.keys(o).forEach(function(t){localStorage[t]&&"default_folder_id"!==t&&(e[t]=localStorage[t])}),chrome.storage.sync.set(e)}var o={background_color:"#f8f9fa",background_image:"background_color",background_external:"",default_folder_id:1,dial_columns:5,dial_width:70,vertical_center:"false",drag_and_drop:"true",auto_generate_thumbnail:"true",enable_sync:"false",show_toolbar:"true",show_settings_icon:"true",show_create_column:"true",show_favicon:"true",thumbnailing_service:"https://logo.clearbit.com/[URL]"};return{init:e,restoreFromSync:t,syncToStorage:n}}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=document.querySelectorAll("[data-locale-message]");Array.prototype.slice.call(e).forEach(function(e){var t=e.getAttribute("data-locale-message");if(~t.indexOf("placeholder"))return void(e.placeholder=chrome.i18n.getMessage(t));e.textContent=chrome.i18n.getMessage(t)})}},,,,,,,function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}n(2),n(4);var r=n(1),i=o(r),a=n(5),c=o(a),l=n(6),s=o(l),u=n(14),d=o(u),f=n(3),m=o(f),g=n(0),p=o(g);document.documentElement.setAttribute("lang",chrome.i18n.getMessage("@@ui_locale").replace("_","-")),(0,s.default)(),m.default.init(".md-ripple");var h=new d.default(".tabs");(function(){function e(){i.default.init(500),c.default.init(),document.getElementById("background_image").addEventListener("change",a,!1),t();var e=chrome.runtime.getManifest();document.getElementById("ext_name").textContent=e.name,document.getElementById("ext_version").textContent=chrome.i18n.getMessage("version")+" "+e.version,document.querySelector(".tabs").addEventListener("change",n),document.getElementById("bgFile").addEventListener("change",o,!1),document.getElementById("background_local").addEventListener("click",r,!1),document.getElementById("restore_local").addEventListener("click",s,!1),document.getElementById("restore_sync").addEventListener("click",u,!1),document.getElementById("enable_sync").addEventListener("change",d,!1),document.getElementById("clear_images").addEventListener("click",l,!1)}function t(){f();var e=document.getElementById("background_image");Array.prototype.slice.call(e.querySelectorAll("option")).forEach(function(t){if(t.value===localStorage.getItem("background_image"))return t.selected=!0,void p.default.trigger("change",e)});var t=!0,n=!1,o=void 0;try{for(var r,i=Object.keys(localStorage)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value,c=document.getElementById(a);c&&c.type&&(/checkbox|radio/.test(c.type)?c.checked="true"===localStorage.getItem(a):c.value=localStorage.getItem(a))}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}function n(e){var t=e.target.closest(".js-change");if(t){var n=t.id;/checkbox|radio/.test(t.type)?localStorage.setItem(n,t.checked):localStorage.setItem(n,t.value),"true"===localStorage.getItem("enable_sync")&&"enable_sync"!==n&&c.default.syncToStorage()}}function o(){var e=this.files[0];if(e){if(this.closest("form").reset(),!/image\/(jpe?g|png)$/.test(e.type))return alert(chrome.i18n.getMessage("alert_file_type_fail"));var t="background."+e.type.replace("image/","");i.default.createDir("images",function(){i.default.createFile("/images/"+t,{file:e,fileType:e.type},function(e){document.querySelector(".c-upload__preview").style.display="",document.getElementById("preview_upload").innerHTML='\n          <div class="c-upload__preview-image"\n               style="background-image: url('+e.toURL()+"?new="+Date.now()+');">\n          <div>\n        ',localStorage.setItem("background_local",e.toURL()),p.default.notifications(chrome.i18n.getMessage("notice_bg_image_updated")),h.recalc()})})}}function r(e){if(e.target.closest("#delete_upload")&&confirm(chrome.i18n.getMessage("confirm_delete_image"),"")){e.preventDefault();var t=document.getElementById("preview_upload"),n=t.closest(".c-upload__preview"),o=localStorage.getItem("background_local");if(o){var r=o.split("/").pop();i.default.deleteFile("/images/"+r,function(){p.default.notifications(chrome.i18n.getMessage("notice_image_removed")),localStorage.removeItem("background_local"),t.innerHTML="",n.style.display="none",h.recalc()})}}}function a(){if(Array.prototype.slice.call(document.querySelectorAll(".tbl__option")).forEach(function(e){e.style.display=""}),"background_local"===this.value){var e=localStorage.getItem("background_local");e?(document.querySelector(".c-upload__preview").style.display="",document.getElementById("preview_upload").innerHTML='\n          <div class="c-upload__preview-image" style="background-image: url('+e+"?new="+Date.now()+');"><div>\n        '):(document.querySelector(".c-upload__preview").style.display="none",document.getElementById("preview_upload").innerHTML="")}document.getElementById(this.value).style.display="block",h.recalc()}function l(e){e.preventDefault(),confirm(chrome.i18n.getMessage("confirm_delete_images"),"")&&(i.default.purge(),p.default.notifications(chrome.i18n.getMessage("notice_images_removed")),localStorage.setItem("background_local",""),localStorage.setItem("custom_dials","{}"))}function s(){confirm(chrome.i18n.getMessage("confirm_restore_default_settings"),"")&&(Object.keys(localStorage).forEach(function(e){"background_local"!==e&&"custom_dials"!==e&&localStorage.removeItem(e)}),c.default.init(),t(),p.default.notifications(chrome.i18n.getMessage("notice_reset_default_settings")))}function u(){confirm(chrome.i18n.getMessage("confirm_clear_sync_settings"),"")&&chrome.storage.sync.clear(function(){p.default.notifications(chrome.i18n.getMessage("notice_sync_settings_cleared")),"true"===localStorage.getItem("enable_sync")&&c.default.syncToStorage()})}function d(){var e=this;this.checked&&chrome.storage.sync.getBytesInUse(null,function(n){n>0?confirm(chrome.i18n.getMessage("confirm_sync_remote_settings"),"")?c.default.restoreFromSync(t):(e.checked=!1,localStorage.setItem("enable_sync","false")):c.default.syncToStorage()})}function f(){var e=document.getElementById("default_folder_id");e.innerHTML="",chrome.bookmarks.getTree(function(t){var n=[],o=[],r=void 0,i=void 0;for(o.push(t[0].children[0]),o.push(t[0].children[1]);void 0!==(r=o.pop());)if(void 0!==r.children){for("0"===r.parentId&&(r.path=""),r.path+=r.title;void 0!==(i=r.children.pop());)void 0!==i.children&&(i.path=r.path+"/",o.push(i));n.push(r)}n.sort(function(e,t){return e.path.localeCompare(t.path)});var a=[],c=localStorage.getItem("default_folder_id");n.forEach(function(e){a.push("<option"+(e.id===c?" selected":"")+' value="'+e.id+'">'+e.path+"</option>")}),e.innerHTML=a.join("")})}return{init:e}})().init()},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t){o(this,e),this.init(t)}return r(e,[{key:"index",value:function(e){for(var t=e.parentNode.children,n=0;n<t.length&&t[n]!==e;n++);return n}},{key:"recalc",value:function(){this.dimmensions()}},{key:"dimmensions",value:function(){this.setSliderLine();var e=this.tabs.offsetWidth,t=this.sections[this.currentId].offsetHeight;this.sections.forEach(function(t){t.style.width=e+"px"}),this.content.style.cssText="\n      transform: translateX(-"+e*this.currentId+"px);\n      height: "+t+"px;\n      width: "+e*this.sections+"px;\n    "}},{key:"selectTab",value:function(e){var t=e.target.closest(".tabs__controls");t&&(this.currentId=this.index(t),this.dimmensions(),this.setSliderLine())}},{key:"setSliderLine",value:function(){var e=this.controls[this.currentId],t=e.offsetWidth,n=e.offsetLeft;this.line.style.cssText="\n      width: "+t+"px;\n      transform: translateX("+n+"px);\n    "}},{key:"init",value:function(e){this.tabs=document.querySelector(e),this.tabs&&!this.tabs.activated&&(this.tabs.activated=!0,this.currentId=0,this.bar=this.tabs.querySelector(".tabs__bar"),this.controls=Array.prototype.slice.call(this.bar.querySelectorAll(".tabs__controls")),this.content=this.tabs.querySelector(".tabs__content"),this.sections=Array.prototype.slice.call(this.content.querySelectorAll(".tabs__section")),this.line=document.createElement("span"),this.line.className="tabs__line",this.bar.appendChild(this.line),this.setSliderLine(),this.dimmensions(),this.handlerClick=this.selectTab.bind(this),this.handlerResize=this.dimmensions.bind(this),this.bar.addEventListener("click",this.handlerClick),window.addEventListener("resize",this.handlerResize))}}]),e}();t.default=i}]);